<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced.  * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * Delete the template below * * * * * * * * * -->
<!-- * * * * * * * to get started with your project! * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->


<main class="main">
  <div class="card1">
    <div class="header">
      <p-button label="New" icon="pi pi-plus" class="mr-2" (click)="addNewProduct()" />
      <p-iconfield iconPosition="left">
        <p-inputicon>
          <i class="pi pi-search"></i>
        </p-inputicon>
        <input type="text" pInputText placeholder="Search" [(ngModel)]="searchQuery" />
      </p-iconfield>
      <p-button label="Export" icon="pi pi-upload" class="mr-2" severity="secondary" (click)="exportProducts()" />
    </div>
  </div>

  <div class="card">
    <p-toast />
    <p-table [value]="filteredProducts" dataKey="id" editMode="row" [tableStyle]="{'min-width': '50rem'}">
      <ng-template #header>
        <tr>
          <th style="width:22%">Code</th>
          <th style="width:22%">Name</th>
          <th style="width:22%">Inventory Status</th>
          <th style="width:22%">Price (₫)</th>
          <th style="width:12%"></th>
        </tr>
      </ng-template>
      <ng-template #body let-product let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="product">
          <td>
            <p-cellEditor>
              <ng-template #input>
                <input pInputText type="text" [(ngModel)]="product.code" />
              </ng-template>
              <ng-template #output>{{product.code}}</ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template #input>
                <input pInputText type="text" [(ngModel)]="product.name" required />
              </ng-template>
              <ng-template #output>{{product.name}}</ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template #input>
                <p-select [options]="statuses" appendTo="body" [(ngModel)]="product.inventoryStatus" [style]="{'width':'100%'}" />
              </ng-template>
              <ng-template #output>
                <p-tag [value]="product.inventoryStatus === 'INSTOCK' ? 'Còn hàng' : 'Hết hàng'" [severity]="getSeverity(product.inventoryStatus)" />
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template #input>
                <input pInputText type="number" [(ngModel)]="product.price" />
              </ng-template>
              <ng-template #output>{{product.price | currency:'VND':'symbol':'1.0-0'}}</ng-template>
            </p-cellEditor>
          </td>
          <td>
            <div class="flex items-center justify-center gap-2">
              <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
                (click)="onRowEditInit(product)" text rounded severity="secondary"></button>
              <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check"
                (click)="onRowEditSave(product)" text rounded severity="secondary"></button>
              <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
                (click)="onRowEditCancel(product, ri)" text rounded severity="secondary"></button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</main>

<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content above * * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced.  * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * End of Placeholder  * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->


<router-outlet />
